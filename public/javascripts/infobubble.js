// ==ClosureCompiler==
// @compilation_level ADVANCED_OPTIMIZATIONS
// @externs_url http://closure-compiler.googlecode.com/svn/trunk/contrib/externs/maps/google_maps_api_v3.js
// ==/ClosureCompiler==

/**
* @name CSS3 InfoBubble with tabs for Google Maps API V3
* @version 0.8
* @author Luke Mahe
* @fileoverview
* This library is a CSS Infobubble with tabs. It uses css3 rounded corners and
* drop shadows and animations. It also allows tabs
*/

/*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*     http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/


function InfoBubble(e){this.extend(InfoBubble,google.maps.OverlayView);this.tabs_=[];this.activeTab_=null;this.baseZIndex_=100;this.isOpen_=false;var t=e||{};if(t["backgroundColor"]==undefined){t["backgroundColor"]=this.BACKGROUND_COLOR_}if(t["borderColor"]==undefined){t["borderColor"]=this.BORDER_COLOR_}if(t["borderRadius"]==undefined){t["borderRadius"]=this.BORDER_RADIUS_}if(t["borderWidth"]==undefined){t["borderWidth"]=this.BORDER_WIDTH_}if(t["padding"]==undefined){t["padding"]=this.PADDING_}if(t["arrowPosition"]==undefined){t["arrowPosition"]=this.ARROW_POSITION_}if(t["disableAutoPan"]==undefined){t["disableAutoPan"]=false}if(t["disableAnimation"]==undefined){t["disableAnimation"]=false}if(t["minWidth"]==undefined){t["minWidth"]=this.MIN_WIDTH_}if(t["shadowStyle"]==undefined){t["shadowStyle"]=this.SHADOW_STYLE_}if(t["arrowSize"]==undefined){t["arrowSize"]=this.ARROW_SIZE_}if(t["arrowStyle"]==undefined){t["arrowStyle"]=this.ARROW_STYLE_}this.buildDom_();this.setValues(t)}window["InfoBubble"]=InfoBubble;InfoBubble.prototype.ARROW_SIZE_=15;InfoBubble.prototype.ARROW_STYLE_=0;InfoBubble.prototype.SHADOW_STYLE_=1;InfoBubble.prototype.MIN_WIDTH_=50;InfoBubble.prototype.ARROW_POSITION_=50;InfoBubble.prototype.PADDING_=10;InfoBubble.prototype.BORDER_WIDTH_=1;InfoBubble.prototype.BORDER_COLOR_="#ccc";InfoBubble.prototype.BORDER_RADIUS_=10;InfoBubble.prototype.BACKGROUND_COLOR_="#fff";InfoBubble.prototype.extend=function(e,t){return function(e){for(var t in e.prototype){this.prototype[t]=e.prototype[t]}return this}.apply(e,[t])};InfoBubble.prototype.buildDom_=function(){var e=this.bubble_=document.createElement("DIV");e.style["position"]="absolute";e.style["zIndex"]=this.baseZIndex_;var t=this.tabsContainer_=document.createElement("DIV");t.style["position"]="relative";var n=this.close_=document.createElement("IMG");n.style["position"]="absolute";n.style["width"]=this.px(12);n.style["height"]=this.px(12);n.style["border"]=0;n.style["zIndex"]=this.baseZIndex_+1;n.style["cursor"]="pointer";n.src="http://maps.gstatic.com/intl/en_us/mapfiles/iw_close.gif";var r=this;google.maps.event.addDomListener(n,"click",function(){r.close();google.maps.event.trigger(r,"closeclick")});var i=this.contentContainer_=document.createElement("DIV");i.style["overflowX"]="auto";i.style["overflowY"]="auto";i.style["cursor"]="default";i.style["clear"]="both";i.style["position"]="relative";var s=this.content_=document.createElement("DIV");i.appendChild(s);var o=this.arrow_=document.createElement("DIV");o.style["position"]="relative";var u=this.arrowOuter_=document.createElement("DIV");var a=this.arrowInner_=document.createElement("DIV");var f=this.getArrowSize_();u.style["position"]=a.style["position"]="absolute";u.style["left"]=a.style["left"]="50%";u.style["height"]=a.style["height"]="0";u.style["width"]=a.style["width"]="0";u.style["marginLeft"]=this.px(-f);u.style["borderWidth"]=this.px(f);u.style["borderBottomWidth"]=0;var l=this.bubbleShadow_=document.createElement("DIV");l.style["position"]="absolute";e.style["display"]=l.style["display"]="none";e.appendChild(this.tabsContainer_);e.appendChild(n);e.appendChild(i);o.appendChild(u);o.appendChild(a);e.appendChild(o);var c=document.createElement("style");c.setAttribute("type","text/css");this.animationName_="_ibani_"+Math.round(Math.random()*1e4);var h="."+this.animationName_+"{-webkit-animation-name:"+this.animationName_+";-webkit-animation-duration:0.5s;"+"-webkit-animation-iteration-count:1;}"+"@-webkit-keyframes "+this.animationName_+" {from {"+"-webkit-transform: scale(0)}50% {-webkit-transform: scale(1.2)}90% "+"{-webkit-transform: scale(0.95)}to {-webkit-transform: scale(1)}}";c.textContent=h;document.getElementsByTagName("head")[0].appendChild(c)};InfoBubble.prototype.setBackgroundClassName=function(e){this.set("backgroundClassName",e)};InfoBubble.prototype["setBackgroundClassName"]=InfoBubble.prototype.setBackgroundClassName;InfoBubble.prototype.backgroundClassName_changed=function(){this.content_.className=this.get("backgroundClassName")};InfoBubble.prototype["backgroundClassName_changed"]=InfoBubble.prototype.backgroundClassName_changed;InfoBubble.prototype.setTabClassName=function(e){this.set("tabClassName",e)};InfoBubble.prototype["setTabClassName"]=InfoBubble.prototype.setTabClassName;InfoBubble.prototype.tabClassName_changed=function(){this.updateTabStyles_()};InfoBubble.prototype["tabClassName_changed"]=InfoBubble.prototype.tabClassName_changed;InfoBubble.prototype.getArrowStyle_=function(){return parseInt(this.get("arrowStyle"),10)||0};InfoBubble.prototype.setArrowStyle=function(e){this.set("arrowStyle",e)};InfoBubble.prototype["setArrowStyle"]=InfoBubble.prototype.setArrowStyle;InfoBubble.prototype.arrowStyle_changed=function(){this.arrowSize_changed()};InfoBubble.prototype["arrowStyle_changed"]=InfoBubble.prototype.arrowStyle_changed;InfoBubble.prototype.getArrowSize_=function(){return parseInt(this.get("arrowSize"),10)||0};InfoBubble.prototype.setArrowSize=function(e){this.set("arrowSize",e)};InfoBubble.prototype["setArrowSize"]=InfoBubble.prototype.setArrowSize;InfoBubble.prototype.arrowSize_changed=function(){this.borderWidth_changed()};InfoBubble.prototype["arrowSize_changed"]=InfoBubble.prototype.arrowSize_changed;InfoBubble.prototype.setArrowPosition=function(e){this.set("arrowPosition",e)};InfoBubble.prototype["setArrowPosition"]=InfoBubble.prototype.setArrowPosition;InfoBubble.prototype.getArrowPosition_=function(){return parseInt(this.get("arrowPosition"),10)||0};InfoBubble.prototype.arrowPosition_changed=function(){var e=this.getArrowPosition_();this.arrowOuter_.style["left"]=this.arrowInner_.style["left"]=e+"%";this.redraw_()};InfoBubble.prototype["arrowPosition_changed"]=InfoBubble.prototype.arrowPosition_changed;InfoBubble.prototype.setZIndex=function(e){this.set("zIndex",e)};InfoBubble.prototype["setZIndex"]=InfoBubble.prototype.setZIndex;InfoBubble.prototype.getZIndex=function(){return parseInt(this.get("zIndex"),10)||this.baseZIndex_};InfoBubble.prototype.zIndex_changed=function(){var e=this.getZIndex();this.bubble_.style["zIndex"]=this.baseZIndex_=e;this.close_.style["zIndex"]=e+1};InfoBubble.prototype["zIndex_changed"]=InfoBubble.prototype.zIndex_changed;InfoBubble.prototype.setShadowStyle=function(e){this.set("shadowStyle",e)};InfoBubble.prototype["setShadowStyle"]=InfoBubble.prototype.setShadowStyle;InfoBubble.prototype.getShadowStyle_=function(){return parseInt(this.get("shadowStyle"),10)||0};InfoBubble.prototype.shadowStyle_changed=function(){var e=this.getShadowStyle_();var t="";var n="";var r="";switch(e){case 0:t="none";break;case 1:n="40px 15px 10px rgba(33,33,33,0.3)";r="transparent";break;case 2:n="0 0 2px rgba(33,33,33,0.3)";r="rgba(33,33,33,0.35)";break}this.bubbleShadow_.style["boxShadow"]=this.bubbleShadow_.style["webkitBoxShadow"]=this.bubbleShadow_.style["MozBoxShadow"]=n;this.bubbleShadow_.style["backgroundColor"]=r;if(this.isOpen_){this.bubbleShadow_.style["display"]=t;this.draw()}};InfoBubble.prototype["shadowStyle_changed"]=InfoBubble.prototype.shadowStyle_changed;InfoBubble.prototype.showCloseButton=function(){this.set("hideCloseButton",false)};InfoBubble.prototype["showCloseButton"]=InfoBubble.prototype.showCloseButton;InfoBubble.prototype.hideCloseButton=function(){this.set("hideCloseButton",true)};InfoBubble.prototype["hideCloseButton"]=InfoBubble.prototype.hideCloseButton;InfoBubble.prototype.hideCloseButton_changed=function(){this.close_.style["display"]=this.get("hideCloseButton")?"none":""};InfoBubble.prototype["hideCloseButton_changed"]=InfoBubble.prototype.hideCloseButton_changed;InfoBubble.prototype.setBackgroundColor=function(e){if(e){this.set("backgroundColor",e)}};InfoBubble.prototype["setBackgroundColor"]=InfoBubble.prototype.setBackgroundColor;InfoBubble.prototype.backgroundColor_changed=function(){var e=this.get("backgroundColor");this.contentContainer_.style["backgroundColor"]=e;this.arrowInner_.style["borderColor"]=e+" transparent transparent";this.updateTabStyles_()};InfoBubble.prototype["backgroundColor_changed"]=InfoBubble.prototype.backgroundColor_changed;InfoBubble.prototype.setBorderColor=function(e){if(e){this.set("borderColor",e)}};InfoBubble.prototype["setBorderColor"]=InfoBubble.prototype.setBorderColor;InfoBubble.prototype.borderColor_changed=function(){var e=this.get("borderColor");var t=this.contentContainer_;var n=this.arrowOuter_;t.style["borderColor"]=e;n.style["borderColor"]=e+" transparent transparent";t.style["borderStyle"]=n.style["borderStyle"]=this.arrowInner_.style["borderStyle"]="solid";this.updateTabStyles_()};InfoBubble.prototype["borderColor_changed"]=InfoBubble.prototype.borderColor_changed;InfoBubble.prototype.setBorderRadius=function(e){this.set("borderRadius",e)};InfoBubble.prototype["setBorderRadius"]=InfoBubble.prototype.setBorderRadius;InfoBubble.prototype.getBorderRadius_=function(){return parseInt(this.get("borderRadius"),10)||0};InfoBubble.prototype.borderRadius_changed=function(){var e=this.getBorderRadius_();var t=this.getBorderWidth_();this.contentContainer_.style["borderRadius"]=this.contentContainer_.style["MozBorderRadius"]=this.contentContainer_.style["webkitBorderRadius"]=this.bubbleShadow_.style["borderRadius"]=this.bubbleShadow_.style["MozBorderRadius"]=this.bubbleShadow_.style["webkitBorderRadius"]=this.px(e);this.tabsContainer_.style["paddingLeft"]=this.tabsContainer_.style["paddingRight"]=this.px(e+t);this.redraw_()};InfoBubble.prototype["borderRadius_changed"]=InfoBubble.prototype.borderRadius_changed;InfoBubble.prototype.getBorderWidth_=function(){return parseInt(this.get("borderWidth"),10)||0};InfoBubble.prototype.setBorderWidth=function(e){this.set("borderWidth",e)};InfoBubble.prototype["setBorderWidth"]=InfoBubble.prototype.setBorderWidth;InfoBubble.prototype.borderWidth_changed=function(){var e=this.getBorderWidth_();this.contentContainer_.style["borderWidth"]=this.px(e);this.tabsContainer_.style["top"]=this.px(e);this.updateArrowStyle_();this.updateTabStyles_();this.borderRadius_changed();this.redraw_()};InfoBubble.prototype["borderWidth_changed"]=InfoBubble.prototype.borderWidth_changed;InfoBubble.prototype.updateArrowStyle_=function(){var e=this.getBorderWidth_();var t=this.getArrowSize_();var n=this.getArrowStyle_();var r=this.px(t);var i=this.px(Math.max(0,t-e));var s=this.arrowOuter_;var o=this.arrowInner_;this.arrow_.style["marginTop"]=this.px(-e);s.style["borderTopWidth"]=r;o.style["borderTopWidth"]=i;if(n==0||n==1){s.style["borderLeftWidth"]=r;o.style["borderLeftWidth"]=i}else{s.style["borderLeftWidth"]=o.style["borderLeftWidth"]=0}if(n==0||n==2){s.style["borderRightWidth"]=r;o.style["borderRightWidth"]=i}else{s.style["borderRightWidth"]=o.style["borderRightWidth"]=0}if(n<2){s.style["marginLeft"]=this.px(-t);o.style["marginLeft"]=this.px(-(t-e))}else{s.style["marginLeft"]=o.style["marginLeft"]=0}if(e==0){s.style["display"]="none"}else{s.style["display"]=""}};InfoBubble.prototype.setPadding=function(e){this.set("padding",e)};InfoBubble.prototype["setPadding"]=InfoBubble.prototype.setPadding;InfoBubble.prototype.getPadding_=function(){return parseInt(this.get("padding"),10)||0};InfoBubble.prototype.padding_changed=function(){var e=this.getPadding_();this.contentContainer_.style["padding"]=this.px(e);this.updateTabStyles_();this.redraw_()};InfoBubble.prototype["padding_changed"]=InfoBubble.prototype.padding_changed;InfoBubble.prototype.px=function(e){if(e){return e+"px"}return e};InfoBubble.prototype.addEvents_=function(){var e=["mousedown","mousemove","mouseover","mouseout","mouseup","mousewheel","DOMMouseScroll","touchstart","touchend","touchmove","dblclick","contextmenu","click"];var t=this.bubble_;this.listeners_=[];for(var n=0,r;r=e[n];n++){this.listeners_.push(google.maps.event.addDomListener(t,r,function(e){e.cancelBubble=true;if(e.stopPropagation){e.stopPropagation()}}))}};InfoBubble.prototype.onAdd=function(){if(!this.bubble_){this.buildDom_()}this.addEvents_();var e=this.getPanes();if(e){e.floatPane.appendChild(this.bubble_);e.floatShadow.appendChild(this.bubbleShadow_)}};InfoBubble.prototype["onAdd"]=InfoBubble.prototype.onAdd;InfoBubble.prototype.draw=function(){var e=this.getProjection();if(!e){return}var t=this.get("position");if(!t){this.close();return}var n=0;if(this.activeTab_){n=this.activeTab_.offsetHeight}var r=this.getAnchorHeight_();var i=this.getArrowSize_();var s=this.getArrowPosition_();s=s/100;var o=e.fromLatLngToDivPixel(t);var u=this.contentContainer_.offsetWidth;var a=this.bubble_.offsetHeight;if(!u){return}var f=o.y-(a+i);if(r){f-=r}var l=o.x-u*s;this.bubble_.style["top"]=this.px(f);this.bubble_.style["left"]=this.px(l);var c=parseInt(this.get("shadowStyle"),10);switch(c){case 1:this.bubbleShadow_.style["top"]=this.px(f+n-1);this.bubbleShadow_.style["left"]=this.px(l);this.bubbleShadow_.style["width"]=this.px(u);this.bubbleShadow_.style["height"]=this.px(this.contentContainer_.offsetHeight-i);break;case 2:u=u*.8;if(r){this.bubbleShadow_.style["top"]=this.px(o.y)}else{this.bubbleShadow_.style["top"]=this.px(o.y+i)}this.bubbleShadow_.style["left"]=this.px(o.x-u*s);this.bubbleShadow_.style["width"]=this.px(u);this.bubbleShadow_.style["height"]=this.px(2);break}};InfoBubble.prototype["draw"]=InfoBubble.prototype.draw;InfoBubble.prototype.onRemove=function(){if(this.bubble_&&this.bubble_.parentNode){this.bubble_.parentNode.removeChild(this.bubble_)}if(this.bubbleShadow_&&this.bubbleShadow_.parentNode){this.bubbleShadow_.parentNode.removeChild(this.bubbleShadow_)}for(var e=0,t;t=this.listeners_[e];e++){google.maps.event.removeListener(t)}};InfoBubble.prototype["onRemove"]=InfoBubble.prototype.onRemove;InfoBubble.prototype.isOpen=function(){return this.isOpen_};InfoBubble.prototype["isOpen"]=InfoBubble.prototype.isOpen;InfoBubble.prototype.close=function(){if(this.bubble_){this.bubble_.style["display"]="none";this.bubble_.className=this.bubble_.className.replace(this.animationName_,"")}if(this.bubbleShadow_){this.bubbleShadow_.style["display"]="none";this.bubbleShadow_.className=this.bubbleShadow_.className.replace(this.animationName_,"")}this.isOpen_=false};InfoBubble.prototype["close"]=InfoBubble.prototype.close;InfoBubble.prototype.open=function(e,t){var n=this;window.setTimeout(function(){n.open_(e,t)},0)};InfoBubble.prototype.open_=function(e,t){this.updateContent_();if(e){this.setMap(e)}if(t){this.set("anchor",t);this.bindTo("anchorPoint",t);this.bindTo("position",t)}this.bubble_.style["display"]=this.bubbleShadow_.style["display"]="";var n=!this.get("disableAnimation");if(n){this.bubble_.className+=" "+this.animationName_;this.bubbleShadow_.className+=" "+this.animationName_}this.redraw_();this.isOpen_=true;var r=!this.get("disableAutoPan");if(r){var i=this;window.setTimeout(function(){i.panToView()},200)}};InfoBubble.prototype["open"]=InfoBubble.prototype.open;InfoBubble.prototype.setPosition=function(e){if(e){this.set("position",e)}};InfoBubble.prototype["setPosition"]=InfoBubble.prototype.setPosition;InfoBubble.prototype.getPosition=function(){return this.get("position")};InfoBubble.prototype["getPosition"]=InfoBubble.prototype.getPosition;InfoBubble.prototype.position_changed=function(){this.draw()};InfoBubble.prototype["position_changed"]=InfoBubble.prototype.position_changed;InfoBubble.prototype.panToView=function(){var e=this.getProjection();if(!e){return}if(!this.bubble_){return}var t=this.getAnchorHeight_();var n=this.bubble_.offsetHeight+t;var r=this.get("map");var i=r.getDiv();var s=i.offsetHeight;var o=this.getPosition();var u=e.fromLatLngToContainerPixel(r.getCenter());var a=e.fromLatLngToContainerPixel(o);var f=u.y-n;var l=s-u.y;var c=f<0;var h=0;if(c){f*=-1;h=(f+l)/2}a.y-=h;o=e.fromContainerPixelToLatLng(a);if(r.getCenter()!=o){r.panTo(o)}};InfoBubble.prototype["panToView"]=InfoBubble.prototype.panToView;InfoBubble.prototype.htmlToDocumentFragment_=function(e){e=e.replace(/^\s*([\S\s]*)\b\s*$/,"$1");var t=document.createElement("DIV");t.innerHTML=e;if(t.childNodes.length==1){return t.removeChild(t.firstChild)}else{var n=document.createDocumentFragment();while(t.firstChild){n.appendChild(t.firstChild)}return n}};InfoBubble.prototype.removeChildren_=function(e){if(!e){return}var t;while(t=e.firstChild){e.removeChild(t)}};InfoBubble.prototype.setContent=function(e){this.set("content",e)};InfoBubble.prototype["setContent"]=InfoBubble.prototype.setContent;InfoBubble.prototype.getContent=function(){return this.get("content")};InfoBubble.prototype["getContent"]=InfoBubble.prototype.getContent;InfoBubble.prototype.updateContent_=function(){if(!this.content_){return}this.removeChildren_(this.content_);var e=this.getContent();if(e){if(typeof e=="string"){e=this.htmlToDocumentFragment_(e)}this.content_.appendChild(e);var t=this;var n=this.content_.getElementsByTagName("IMG");for(var r=0,i;i=n[r];r++){google.maps.event.addDomListener(i,"load",function(){t.imageLoaded_()})}google.maps.event.trigger(this,"domready")}this.redraw_()};InfoBubble.prototype.imageLoaded_=function(){var e=!this.get("disableAutoPan");this.redraw_();if(e&&(this.tabs_.length==0||this.activeTab_.index==0)){this.panToView()}};InfoBubble.prototype.updateTabStyles_=function(){if(this.tabs_&&this.tabs_.length){for(var e=0,t;t=this.tabs_[e];e++){this.setTabStyle_(t.tab)}this.activeTab_.style["zIndex"]=this.baseZIndex_;var n=this.getBorderWidth_();var r=this.getPadding_()/2;this.activeTab_.style["borderBottomWidth"]=0;this.activeTab_.style["paddingBottom"]=this.px(r+n)}};InfoBubble.prototype.setTabStyle_=function(e){var t=this.get("backgroundColor");var n=this.get("borderColor");var r=this.getBorderRadius_();var i=this.getBorderWidth_();var s=this.getPadding_();var o=this.px(-Math.max(s,r));var u=this.px(r);var a=this.baseZIndex_;if(e.index){a-=e.index}var f={cssFloat:"left",position:"relative",cursor:"pointer",backgroundColor:t,border:this.px(i)+" solid "+n,padding:this.px(s/2)+" "+this.px(s),marginRight:o,whiteSpace:"nowrap",borderRadiusTopLeft:u,MozBorderRadiusTopleft:u,webkitBorderTopLeftRadius:u,borderRadiusTopRight:u,MozBorderRadiusTopright:u,webkitBorderTopRightRadius:u,zIndex:a,display:"inline"};for(var l in f){e.style[l]=f[l]}var c=this.get("tabClassName");if(c!=undefined){e.className+=" "+c}};InfoBubble.prototype.addTabActions_=function(e){var t=this;e.listener_=google.maps.event.addDomListener(e,"click",function(){t.setTabActive_(this)})};InfoBubble.prototype.setTabActive=function(e){var t=this.tabs_[e-1];if(t){this.setTabActive_(t.tab)}};InfoBubble.prototype["setTabActive"]=InfoBubble.prototype.setTabActive;InfoBubble.prototype.setTabActive_=function(e){if(!e){this.setContent("");this.updateContent_();return}var t=this.getPadding_()/2;var n=this.getBorderWidth_();if(this.activeTab_){var r=this.activeTab_;r.style["zIndex"]=this.baseZIndex_-r.index;r.style["paddingBottom"]=this.px(t);r.style["borderBottomWidth"]=this.px(n)}e.style["zIndex"]=this.baseZIndex_;e.style["borderBottomWidth"]=0;e.style["marginBottomWidth"]="-10px";e.style["paddingBottom"]=this.px(t+n);this.setContent(this.tabs_[e.index].content);this.updateContent_();this.activeTab_=e;this.redraw_()};InfoBubble.prototype.setMaxWidth=function(e){this.set("maxWidth",e)};InfoBubble.prototype["setMaxWidth"]=InfoBubble.prototype.setMaxWidth;InfoBubble.prototype.maxWidth_changed=function(){this.redraw_()};InfoBubble.prototype["maxWidth_changed"]=InfoBubble.prototype.maxWidth_changed;InfoBubble.prototype.setMaxHeight=function(e){this.set("maxHeight",e)};InfoBubble.prototype["setMaxHeight"]=InfoBubble.prototype.setMaxHeight;InfoBubble.prototype.maxHeight_changed=function(){this.redraw_()};InfoBubble.prototype["maxHeight_changed"]=InfoBubble.prototype.maxHeight_changed;InfoBubble.prototype.setMinWidth=function(e){this.set("minWidth",e)};InfoBubble.prototype["setMinWidth"]=InfoBubble.prototype.setMinWidth;InfoBubble.prototype.minWidth_changed=function(){this.redraw_()};InfoBubble.prototype["minWidth_changed"]=InfoBubble.prototype.minWidth_changed;InfoBubble.prototype.setMinHeight=function(e){this.set("minHeight",e)};InfoBubble.prototype["setMinHeight"]=InfoBubble.prototype.setMinHeight;InfoBubble.prototype.minHeight_changed=function(){this.redraw_()};InfoBubble.prototype["minHeight_changed"]=InfoBubble.prototype.minHeight_changed;InfoBubble.prototype.addTab=function(e,t){var n=document.createElement("DIV");n.innerHTML=e;this.setTabStyle_(n);this.addTabActions_(n);this.tabsContainer_.appendChild(n);this.tabs_.push({label:e,content:t,tab:n});n.index=this.tabs_.length-1;n.style["zIndex"]=this.baseZIndex_-n.index;if(!this.activeTab_){this.setTabActive_(n)}n.className=n.className+" "+this.animationName_;this.redraw_()};InfoBubble.prototype["addTab"]=InfoBubble.prototype.addTab;InfoBubble.prototype.updateTab=function(e,t,n){if(!this.tabs_.length||e<0||e>=this.tabs_.length){return}var r=this.tabs_[e];if(t!=undefined){r.tab.innerHTML=r.label=t}if(n!=undefined){r.content=n}if(this.activeTab_==r.tab){this.setContent(r.content);this.updateContent_()}this.redraw_()};InfoBubble.prototype["updateTab"]=InfoBubble.prototype.updateTab;InfoBubble.prototype.removeTab=function(e){if(!this.tabs_.length||e<0||e>=this.tabs_.length){return}var t=this.tabs_[e];t.tab.parentNode.removeChild(t.tab);google.maps.event.removeListener(t.tab.listener_);this.tabs_.splice(e,1);delete t;for(var n=0,r;r=this.tabs_[n];n++){r.tab.index=n}if(t.tab==this.activeTab_){if(this.tabs_[e]){this.activeTab_=this.tabs_[e].tab}else if(this.tabs_[e-1]){this.activeTab_=this.tabs_[e-1].tab}else{this.activeTab_=undefined}this.setTabActive_(this.activeTab_)}this.redraw_()};InfoBubble.prototype["removeTab"]=InfoBubble.prototype.removeTab;InfoBubble.prototype.getElementSize_=function(e,t,n){var r=document.createElement("DIV");r.style["display"]="inline";r.style["position"]="absolute";r.style["visibility"]="hidden";if(typeof e=="string"){r.innerHTML=e}else{r.appendChild(e.cloneNode(true))}document.body.appendChild(r);var i=new google.maps.Size(r.offsetWidth,r.offsetHeight);if(t&&i.width>t){r.style["width"]=this.px(t);i=new google.maps.Size(r.offsetWidth,r.offsetHeight)}if(n&&i.height>n){r.style["height"]=this.px(n);i=new google.maps.Size(r.offsetWidth,r.offsetHeight)}document.body.removeChild(r);delete r;return i};InfoBubble.prototype.redraw_=function(){this.figureOutSize_();this.positionCloseButton_();this.draw()};InfoBubble.prototype.figureOutSize_=function(){var e=this.get("map");if(!e){return}var t=this.getPadding_();var n=this.getBorderWidth_();var r=this.getBorderRadius_();var i=this.getArrowSize_();var s=e.getDiv();var o=i*2;var u=s.offsetWidth-o;var a=s.offsetHeight-o-this.getAnchorHeight_();var f=0;var l=this.get("minWidth")||0;var c=this.get("minHeight")||0;var h=this.get("maxWidth")||0;var p=this.get("maxHeight")||0;h=Math.min(u,h);p=Math.min(a,p);var d=0;if(this.tabs_.length){for(var v=0,m;m=this.tabs_[v];v++){var g=this.getElementSize_(m.tab,h,p);var y=this.getElementSize_(m.content,h,p);if(l<g.width){l=g.width}d+=g.width;if(c<g.height){c=g.height}if(g.height>f){f=g.height}if(l<y.width){l=y.width}if(c<y.height){c=y.height}}}else{var b=this.get("content");if(typeof b=="string"){b=this.htmlToDocumentFragment_(b)}if(b){var y=this.getElementSize_(b,h,p);if(l<y.width){l=y.width}if(c<y.height){c=y.height}}}if(h){l=Math.min(l,h)}if(p){c=Math.min(c,p)}l=Math.max(l,d);if(l==d){l=l+2*t}i=i*2;l=Math.max(l,i);if(l>u){l=u}if(c>a){c=a-f}if(this.tabsContainer_){this.tabHeight_=f;this.tabsContainer_.style["width"]=this.px(d)}this.contentContainer_.style["width"]=this.px(l);this.contentContainer_.style["height"]=this.px(c)};InfoBubble.prototype.getAnchorHeight_=function(){var e=this.get("anchor");if(e){var t=this.get("anchorPoint");if(t){return-1*t.y}}return 0};InfoBubble.prototype.anchorPoint_changed=function(){this.draw()};InfoBubble.prototype["anchorPoint_changed"]=InfoBubble.prototype.anchorPoint_changed;InfoBubble.prototype.positionCloseButton_=function(){var e=this.getBorderRadius_();var t=this.getBorderWidth_();var n=2;var r=2;if(this.tabs_.length&&this.tabHeight_){r+=this.tabHeight_}r+=t;n+=t;var i=this.contentContainer_;if(i&&i.clientHeight<i.scrollHeight){n+=15}this.close_.style["right"]=this.px(n);this.close_.style["top"]=this.px(r)}
